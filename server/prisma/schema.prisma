generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model Client {
  apiKey String @id @unique @default(uuid())
}

model Page {
  url         String    @id @unique
  domain      String
  lastScraped DateTime?
  linksTo     Link[]    @relation("linkSrc")
  linkedFrom  Link[]    @relation("linkDst")
}

model Link {
  id String @id @default(uuid())

  src       Page   @relation("linkSrc", fields: [srcUrl], references: [url])
  srcUrl    String
  dst       Page   @relation("linkDst", fields: [dstUrl], references: [url])
  dstUrl    String
  imageUrl  String
  imageHash String
}

model Redirect {
  from String @id @unique
  to   String
}
